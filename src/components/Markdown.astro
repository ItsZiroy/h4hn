---
import { micromark } from "micromark";
import "../styles/markdown.css";

const { content } = Astro.props;
import { gfm, gfmHtml } from "micromark-extension-gfm";
import { processExternalLinks } from "../lib/external-link";

const rawHtml = micromark(content, {
  extensions: [gfm()],
  htmlExtensions: [gfmHtml()],
});

// Post-process the HTML to add external link attributes
const file = processExternalLinks(rawHtml);
---

<div class="md" set:html={String(file)} />
