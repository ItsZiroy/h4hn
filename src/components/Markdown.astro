---
import { micromark } from "micromark";

const { content } = Astro.props;
import { gfm, gfmHtml } from "micromark-extension-gfm";
import { processExternalLinks } from "../lib/external-link";

const rawHtml = micromark(content, {
  extensions: [gfm()],
  htmlExtensions: [gfmHtml()],
});

// Post-process the HTML to add external link attributes
const file = processExternalLinks(rawHtml);
---

<div class="md" set:html={String(file)} />

<style>
  .md {
    ol {
      list-style-type: decimal;
      margin-left: 1.5em;
    }
    ul {
      list-style-type: disc;
      margin-left: 1.5em;
    }
    li {
      margin-bottom: 0.3em;
    }
    a {
      color: #1c5e94;
      text-decoration: underline;
    }
    a {
      &:where(.dark, .dark *) {
        color: var(--color-gray-400);
      }
    }
  }
</style>
